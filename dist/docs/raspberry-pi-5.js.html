<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: raspberry-pi-5.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: raspberry-pi-5.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import * as THREE from 'three';
import TWEEN from '@tweenjs/tween.js';
import { Project } from '/js/src/project.js'
import { Context } from '/js/src/context.js'
import { Handlers } from '/js/src/handlers';

/**
 * The Raspberry project core file.
 * @module Raspberry
 */

console.group("raspberry js");

/**
 * @constant {Handlers} handlers Handlers Module as an instance.
 */
const handlers = Handlers;

/**
 * @constant {Context} context The Context Module as an instance.
 */
const context = Context;

// Add to context: clock
context.add({ 'name': "clock", 'obj': new THREE.Clock() });

/**
 * @constant {THREE.scene} scene The scene to render.
 * 
 */
const scene = Project.setStage();

/**
 * @constant {THREE.camera} camera The camera of the scene.
 * 
 */
const camera = Project.setCamera();

/**
 * @member {THREE.renderer} renderer The renderer engine instance.
 * 
 */
let renderer = false;

/**
 * @member {THREE.AnimationMixer} mixer The mixer instance.
 */
let mixer = false; 

/**
 * @member {OrbitControls} controls The Orbit Controls instance.
 */
let controls = false;

// Promise to load the gltf containing the main stage inside the scene and attach the mixer.
Project.loadGltfScene();

// Promise to load the renderer, and attach controls.
Project.setRenderer();


/**
 * Animate is the central heartbeat of all animation processes.
 * @constant
 * @function
 * @returns void
 *
 */
const animate = () => {
  requestAnimationFrame(animate);
  try {
    const delta = context.get.clock.getDelta();
    // "If" checks should pass once when the resolved promises export the variables.
    if (!mixer) {
      mixer = context.get.mixer;
      console.log(`Swapping mixer from context: ${typeof mixer}`);
    };
    if (!controls) {
      controls = context.get.controls;
      console.log(`Swapping controls from context: ${typeof controls}`);
    };
    if (!renderer) {
      renderer = context.get.renderer;
      console.log(`Swapping renderer from context: ${typeof renderer}`);
    };
    
    // natural "in scope" render steps.
    mixer.update(delta);
    TWEEN.update();
    controls.update(delta);
    
    renderer.render(context.get.scene, context.get.camera);
  } catch (e) {
    console.log(`Main Animate: ${e.message} `);
  }
}

// 3D Runtime starts
animate();
console.groupEnd(); </code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Context.html">Context</a></li><li><a href="module-Handlers.html">Handlers</a></li><li><a href="module-Project.html">Project</a></li><li><a href="module-Raspberry.html">Raspberry</a></li><li><a href="module-main.html">main</a></li></ul><h3>Classes</h3><ul><li><a href="Handlers_animationAnim.html">animationAnim</a></li><li><a href="Handlers_tweeningTween.html">tweeningTween</a></li><li><a href="module-main-Picker.html">Picker</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu Dec 21 2023 10:54:27 GMT-0500 (Colombia Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
